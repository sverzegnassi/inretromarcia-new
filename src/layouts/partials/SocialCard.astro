---
import getFullEntryDefinition from '@lib/keystatic/getFullEntryDefinition';

interface Props {
  collectionName: string;
  slug: string;
}

const { collectionName, slug } = Astro.props;
const webpageFullUrl = new URL(Astro.url.pathname, Astro.site).href;

// Read Keystatic configuration
const { websiteConfig, cmsEntry, coverImage, socialCard } = await getFullEntryDefinition(
  { collectionName: collectionName, slug: slug },
);

---

<meta property="og:type"         content="article">
<meta property="og:title"        content={cmsEntry.socialCard?.title ?? cmsEntry.title ?? cmsEntry.meta.title}>
<meta property="og:description"  content={cmsEntry.socialCard?.description ?? cmsEntry.excerpt ?? cmsEntry.meta.description}>
<meta property="og:url"          content={webpageFullUrl}>
<meta property="og:site_name"    content={websiteConfig?.general.titleShort}>
<meta property="og:locale"       content={websiteConfig?.general.lang}>
<meta property="og:image"        content={socialCard?.src ?? coverImage?.src ?? ""}>

<meta name="twitter:card"        content="summary_large_image">
<meta name="twitter:title"       content={cmsEntry.socialCard?.title ?? cmsEntry.title ?? cmsEntry.meta.title}>
<meta name="twitter:description" content={cmsEntry.socialCard?.description ?? cmsEntry.excerpt ?? cmsEntry.meta.description}>
<meta name="twitter:image"       content={socialCard?.src ?? coverImage?.src ?? ""}>
